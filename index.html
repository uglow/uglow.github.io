<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; ugl&#9728;w</title>
<meta name="description" content="Latest Blog posts.">
<meta name="keywords" content="">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Latest Blog posts.">
<meta property="og:url" content="http://uglow.github.io/index.html">
<meta property="og:site_name" content="ugl&#9728;w">





<link rel="canonical" href="http://uglow.github.io/">
<link href="http://uglow.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="ugl&#9728;w Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://uglow.github.io/assets/css/main.min.css">
<link rel="stylesheet" href="http://uglow.github.io/assets/css/uglow.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://uglow.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://uglow.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://uglow.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://uglow.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://uglow.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://uglow.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://uglow.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post-index" class="feature" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://uglow.github.io">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://uglow.github.io/images/avatar-body.png" alt="Brett Uglow photo" class="author-photo">
					<h4>Brett Uglow</h4>
					<p>Born and raised in Melbourne, I like to create great user experiences. I don't have much time to blog, so this site is mainly for my own use to point to interesting posts and share things I think are worth sharing.</p>
				</li>
				<li><a href="http://uglow.github.io/about/">Learn More</a></li>
				<li>
					<a href="mailto:uifx@uifx.com"><i class="icon-envelope"></i> Email</a>
				</li>
				
				
				
				<li>
					<a href="http://linkedin.com/in/http://www.linkedin.com/profile/view?id=9288137"><i class="icon-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/uglow"><i class="icon-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://uglow.github.io/archive/">All Posts</a></li>
				<li><a href="http://uglow.github.io/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://uglow.github.io/pages/githelp.html">Git tips</a></li><li><a href="http://uglow.github.io/pages/regexhelp.html">RegEx tips</a></li><li><a href="http://www.uifx.com">UIFX</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
    <div class="entry-image"><img src="http://uglow.github.io/images/abstract-5.jpg" alt="Latest Posts" itemprop="image">
      <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>ugl<span class='sun'>&#9728;</span>w</h1>
      <h2 itemprop="name">Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  
<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2014-02-12T00:00:00+11:00" itemprop="datePublished"><a href="http://uglow.github.io/Grunt-File-Include-Plugins">February 12, 2014</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="http://uglow.github.io/about" title="About Brett Uglow" itemprop="url">Brett Uglow</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://uglow.github.io/Grunt-File-Include-Plugins#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="http://uglow.github.io/Grunt-File-Include-Plugins" rel="bookmark" title="File-include plugins for GruntJS" itemprop="url">File-include plugins for GruntJS</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <h2 id="the-problem">The Problem</h2>
<p>You want to keep your code <abbr title="Don't repeat yourself">DRY</abbr> and/or you want to keep data separate form your code.
So you pull the data out of your code into a separate data file (in an XML or JSON format). Sweet! Now you have appropriate
syntax highlighting for your code and data, and you have separated your concerns. But how do you use the data from your code?</p>

<p>Well you can either:</p>

<ul>
  <li>Load the data at runtime</li>
  <li>OR, recombine the code and data in a compilation step</li>
</ul>

<p>There are pros and cons to both approaches, but lets say that the main priority is you want to avoid an extra HTTP request at runtime. 
That means that combining the files during compilation is the best option.</p>

<p>There are number of <a href="http://gruntjs.com/">GruntJS</a> plugins available which purport to offer the required functionality. 
Let’s take a look at the main features of 4 plugins:</p>

<ol>
  <li>grunt-bake</li>
  <li>grunt-include-replace-cwd</li>
  <li>grunt-includes</li>
  <li>grunt-include-replace</li>
</ol>

<h2 id="key-requirements">Key requirements</h2>

<h3 id="include-any-kind-of-file">Include any kind of file</h3>

<p>Obviously, the plugin must allow you to include one file from another file:</p>

<div class="highlight"><pre><code class="html">// index.html:
//@@include(&#39;indexTemplate.html&#39;)

// indexTemplate.html:
<span class="nt">&lt;html&gt;&lt;body&gt;</span>
Hello world
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</code></pre></div>

<p>This should produce the following index.html file:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;html&gt;&lt;body&gt;</span>
Hello world
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</code></pre></div>

<p>Some plugins are adept and doing file-includes for only certain types of files, usually HTML. This is fine if you only need HTML file-includes.
But an ideal solution shouldn’t care what kind of files you want to include. For example, you should be able to do this:</p>

<div class="highlight"><pre><code class="js"><span class="c1">// routeLoader.js:</span>
<span class="p">...</span>
<span class="kd">function</span> <span class="nx">getRoutes</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">routeTable</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="c1">//@@include(&#39;routeData.jsonp&#39;)</span>
	<span class="k">return</span> <span class="nx">routeTable</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>

<span class="c1">// routeData.jsonp:</span>
<span class="nx">routeTable</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;really&#39;</span><span class="p">,</span> <span class="s1">&#39;big&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;things&#39;</span><span class="p">,</span> <span class="p">...];</span>
</code></pre></div>

<p>This should produce the following routeLoader.js file:</p>

<div class="highlight"><pre><code class="js"><span class="p">...</span>
<span class="kd">function</span> <span class="nx">getRoutes</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">routeTable</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="nx">routeTable</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;really&#39;</span><span class="p">,</span> <span class="s1">&#39;big&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;things&#39;</span><span class="p">,</span> <span class="p">...];</span>
	<span class="k">return</span> <span class="nx">routeTable</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>
</code></pre></div>

<h3 id="templates-and-attribute-passing">Templates and attribute passing</h3>

<p>This is a really important feature which extends-on from the idea of being able to insert one file into another:
the ability to insert one-or-more values into one-or-more places in an included file. For example:</p>

<div class="highlight"><pre><code class="html">// indexDev.html:
//@@include(&#39;indexTemplate.html&#39;, {environment: &quot;Dev&quot;})

// indexProd.html:
//@@include(&#39;indexTemplate.html&#39;, {envirionment: &quot;Prod&quot;})

// indexTemplate.html:
<span class="nt">&lt;html&gt;&lt;body&gt;</span>
Hello world, you&#39;re in //@@environment now!
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</code></pre></div>

<p>This produces indexDev.html…</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;html&gt;&lt;body&gt;</span>
Hello world, you&#39;re in Dev now!
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</code></pre></div>

<p>…and indexProd.html</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;html&gt;&lt;body&gt;</span>
Hello world, you&#39;re in Prod now!
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</code></pre></div>

<p>This capability provides a compile-time template engine! Very powerful.</p>

<h3 id="template-and-file-include-configurable-syntax">Template and file-include configurable syntax</h3>
<p>The ideal file-include plugin would allow you to set the syntax to use when defining the file-include command and when defining what a template-value looks like.
Naïve implementations often use a syntax that conflicts with run-time template engines, or server-side template engines.</p>

<p>For example, if you use AngularJS, it uses {{}} notation for binding to data from within HTML fragments:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;html&gt;&lt;body&gt;</span>
Hello world, you&#39;re in {{environment}} now!
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</code></pre></div>

<p>If the file-include plugin uses the same syntax, you’re in trouble because the plugin will replace all the {{}} templates it finds before Angular gets to run!
Most of the newer plugins allow you to configure the syntax for both templates and file-include commands:</p>

<div class="highlight"><pre><code class="js"><span class="nx">includereplace</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">prefix</span><span class="o">:</span> <span class="s1">&#39;//@@&#39;</span><span class="p">,</span> <span class="c1">// This works for HTML and JS replacements</span>
    <span class="nx">suffix</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="support-for-grunt-04-file-globbing-conventions">Support for Grunt 0.4+ file globbing conventions</h3>
<p>Depending on when the plugin was written, the plugin will support <a href="http://gruntjs.com/configuring-tasks#files">different syntaxes</a> for file specifications.
You don’t want to have to specify every single file that has an include in it (unless you have a really-small project… size DOES matter).</p>

<p>For example, the following sub-tasks should be supported by your plugin:</p>

<div class="highlight"><pre><code class="js"><span class="nx">include</span><span class="o">-</span><span class="nx">plugin</span><span class="o">:</span> <span class="p">{</span>
  <span class="c1">// Specify a list of JS files as inputs, and output them into the output/js directory</span>
  <span class="nx">js</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">expand</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">cwd</span><span class="o">:</span> <span class="s1">&#39;&lt;%= env.environment.outputDir %&gt;/js&#39;</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;*.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= env.environment.outputDir %&gt;/js/&#39;</span> <span class="p">},</span>
    <span class="p">]</span>
  <span class="p">},</span>
  
  <span class="c1">// Find all JS files in the test directory, at any depth, and output them to the output/test directory</span>
  <span class="nx">test</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">expand</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">cwd</span><span class="o">:</span> <span class="s1">&#39;&lt;%= env.environment.outputDir %&gt;/test&#39;</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;**/*.js&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= env.environment.outputDir %&gt;/test/&#39;</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  
  <span class="c1">// Find all html files in the output directory, except for ones ending in &#39;...Template.html&#39; and output them to the output directory</span>
  <span class="c1">// Note that we are over-writing the original files, and that&#39;s ok!</span>
  <span class="nx">web</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">files</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">expand</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">cwd</span><span class="o">:</span> <span class="s1">&#39;&lt;%= env.environment.outputDir %&gt;&#39;</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;*.html&#39;</span><span class="p">,</span> <span class="s1">&#39;!*Template.html&#39;</span><span class="p">],</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= env.environment.outputDir %&gt;/&#39;</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Note that in all cases, none of the matching source files are expected to be concatenated into a single file by the plugin. </p>

<h3 id="other-features">Other features</h3>
<p>Some plugins support conditional logic in their templating, which can be useful if you are heavily using the templating features.
In my case, I don’t need this functionality.</p>

<h2 id="plugins">Plugins</h2>

<h3 id="grunt-bake">grunt-bake</h3>

<p>When I was first looking for a file-include plugin, <a href="https://github.com/MathiasPaumgarten/grunt-bake">grunt-bake</a> was the first plugin I could get working. 
After using it a bit more and finding that it didn’t support specifying a directory as a destination, I created a local patch to do it.
This patch had to be installed before any other Grunt tasks were run, so it became a glaring sign that something wasn’t right. In the end, the need
for the patch file drove me to explore other file-include plugins further.</p>

<p>Features:</p>

<ul>
  <li>File include capability</li>
  <li>Inline attributes for included files</li>
  <li>Attributes via Gruntfile.js</li>
  <li>Configurable template replacement pattern</li>
  <li>Conditional logic (if, for)</li>
</ul>

<p>Missing Features:</p>

<ul>
  <li>Specifying a directory as a destination for processed files</li>
  <li>Configurable file-include syntax pattern</li>
</ul>

<h3 id="grunt-include-replace-cwd">grunt-include-replace-cwd</h3>

<p>I didn’t investigate <a href="https://www.npmjs.org/package/grunt-include-replace-cwd">grunt-include-replace-cwd</a> in much depth due to it’s age, lack of
examples and the sense that it was not being maintained.</p>

<p>Features:</p>

<ul>
  <li>File include capability</li>
  <li>Configurable template replacement pattern</li>
  <li>Configurable file-include syntax pattern</li>
  <li>Specifying a directory as a destination for processed files</li>
  <li>Inline attributes for included files</li>
  <li>Attributes via Gruntfile.js</li>
</ul>

<p>Missing Features:</p>

<ul>
  <li>Conditional logic (if, for)</li>
</ul>

<h3 id="grunt-includes">grunt-includes</h3>

<p><a href="https://www.npmjs.org/package/grunt-includes">grunt-includes</a> supports basic file-include features, but does not support attribute-passing or templates.</p>

<p>Features:</p>

<ul>
  <li>File include capability</li>
  <li>Configurable template replacement pattern</li>
  <li>Configurable file-include syntax pattern</li>
  <li>Specifying a directory as a destination for processed files</li>
</ul>

<p>Missing Features:</p>

<ul>
  <li>Inline attributes for included files</li>
  <li>Attributes via Gruntfile.js</li>
  <li>Conditional logic (if, for)</li>
</ul>

<h3 id="grunt-include-replace">grunt-include-replace</h3>
<p><a href="https://www.npmjs.org/package/grunt-include-replace">include-replace</a> is a great plugin which met my main requirements. </p>

<p>Features:</p>

<ul>
  <li>File include capability</li>
  <li>Inline attributes for included files</li>
  <li>Attributes via Gruntfile.js</li>
  <li>Configurable template replacement pattern</li>
  <li>Specifying a directory as a destination for processed files</li>
  <li>Configurable file-include syntax pattern</li>
</ul>

<p>Missing Features:</p>

<ul>
  <li>Conditional logic (if, for)</li>
</ul>

<h2 id="conclusion">Conclusion</h2>
<p>After evaluating these plugins, I decided on <a href="https://www.npmjs.org/package/grunt-include-replace">include-replace</a> for the following reasons:</p>

<ul>
  <li>It supports normal Grunt 0.4+ file source/destination conventions. You don’t want to have to specify a destination file pattern for
each source file-pattern, which is what some plugins forced you to do. Alternatively, they interpreted a directory specification as “concatenate all source files into the specified directory”!</li>
  <li>It supports configurable file and template syntax which means that the plugin won’t interfere with any other template syntax that is in use (such as AngularJS, Handlebars, JSPs). It also allows me to choose a syntax that is ignored by lint-checkers for JS and HTML files. </li>
  <li>It supports passing attributes to included-files globally (via Gruntfile.js) and inline.</li>
</ul>

<p>After using it for a month, it performs reliably and does what I need it to.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2013-11-01T00:00:00+11:00" itemprop="datePublished"><a href="http://uglow.github.io/Setup-Jekyll-For-GitHub">November 01, 2013</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="http://uglow.github.io/about" title="About Brett Uglow" itemprop="url">Brett Uglow</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://uglow.github.io/Setup-Jekyll-For-GitHub#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="http://uglow.github.io/Setup-Jekyll-For-GitHub" rel="bookmark" title="Setup Jekyll for Github Pages" itemprop="url">Setup Jekyll for Github Pages</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <p>Using <a href="alink: http://davidensinger.com/2013/04/deploying-jekyll-to-github-pages/">this article</a> as a guide and
<a href="http://blog.coolaj86.com/articles/hosting-your-blog-on-github-pages.html">this one</a>:</p>

<h2 id="setup">Setup</h2>
<p>Basically what we will do is commit the source code into a <code>source</code> branch and have the compiled code on the master branch:</p>

<div class="highlight"><pre><code class="console"><span class="gp">#</span> rename current master to something <span class="k">else</span>
<span class="go">git branch -m master master-old</span>
<span class="gp">#</span> Create <span class="nb">source </span>branch from the old master and check it out
<span class="go">git checkout master-old &amp;&amp; git checkout -b source</span>
</code></pre></div>

<h2 id="publishing-steps">Publishing Steps</h2>

<ol>
  <li>Build your site from the <code>source</code> branch into <code>/web</code> (your output folder). I’m using <code>grunt</code> to do this step.</li>
  <li>Checkout the <code>master</code> branch</li>
  <li>Remove the existing content files from <code>master</code></li>
  <li>Copy the new site content into the root project directory</li>
  <li>Add the new site content to git &amp; push to origin</li>
</ol>

<p>Here’s a script to do Step 2 onwards, which I call from <code>grunt</code> after doing step 1:</p>

<div class="highlight"><pre><code class="console"><span class="go">git status</span>

<span class="gp">#</span> Checkout master branch
<span class="go">git checkout master</span>

<span class="gp">#</span> Rename the /web directory to .web
<span class="go">mv web .web</span>
<span class="go">mv node_modules .node_modules</span>
<span class="go"> </span>
<span class="gp">#</span> Remove all non . files
<span class="go">rm -rf *</span>

<span class="gp">#</span> Copy everything from .web to current dir
<span class="go">rsync -a .web/ ./</span>
<span class="go"> </span>
<span class="gp">#</span> Remove .web 
<span class="go">rm -rf .web</span>

<span class="gp">#</span> Add everything
<span class="go">git add .</span>

<span class="gp">#</span> Commit using the same commit message as from the <span class="s1">&#39;source&#39;</span> branch
<span class="go">git commit -C source</span>
<span class="go">git push origin master</span>

<span class="gp">#</span> Remove everything again
<span class="go">rm -rf *</span>

<span class="gp">#</span> Re-add node_modules
<span class="go">mv .node_modules node_modules</span>

<span class="gp">#</span> checkout <span class="nb">source </span>again
<span class="go">git checkout source</span>

<span class="gp">#</span> undo any pending changes to any files
<span class="go">git checkout -- .</span>
<span class="go">git status</span>
</code></pre></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2013-10-31T00:00:00+11:00" itemprop="datePublished"><a href="http://uglow.github.io/Lessons-from-client-website-engagement">October 31, 2013</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="http://uglow.github.io/about" title="About Brett Uglow" itemprop="url">Brett Uglow</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://uglow.github.io/Lessons-from-client-website-engagement#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="http://uglow.github.io/Lessons-from-client-website-engagement" rel="bookmark" title="Notes from a recent mobile project" itemprop="url">Notes from a recent mobile project</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <p>I have been developing a website for a top-tier client in Melbourne. The site is built using AngularJS (v1.1.5 as of time of writing), SASS, Compass and GruntJs to pull it all together. The development team consisted of myself as lead dev, Mario Skouros, Peter Mescalchin and Steven Yip, with assistance from Michael Black and Vlado Grancaric. Well done guys!</p>

<h1 id="design">Design</h1>

<p>The visual and interface design was by George Metaxas, who is part of the client’s design team.</p>

<h1 id="under-the-hood">Under the hood</h1>

<p>The site is part application, part CMS-driven website. It was technically challenging to get the client’s CMS to produce the content in a format and structure that AngularJS could consuem, but we found a solution that was workable.</p>

<p>The site is build for modern browsers (Android 2.3+, i-devices, Blackberry, …) and should work with desktop browsers as well (recent versions of Chrome, Safari and Firefox). We elected early on not to support IE because, well, IE is not very standards-compliant. But in our case, there are not many IE-users of the old mobile site, so it wasn’t worth investing in at this point in time.</p>

<h2 id="engine--chassis---angularjs">Engine &amp; Chassis - AngularJS</h2>

<p>We used AngularJS 1.1.5 - which added nice animation support and the ability to cancel timeouts. Using Angular was fantastic, but there were difficulties getting the Apache re-write rules to work for when the site was at the root and when it was a sub-directory site. Overall, I’d highly recommend using it for web applications and websites (up to N-hundred pages).</p>

<h2 id="bolts---gruntjs">Bolts - GruntJS</h2>

<p>GruntJS is a fantastic tool for front-end devs. It allowed us to integrate font-icon-building, image optimization and source-code minimisation into our build process. Combined with Apache’s mod_deflate, we were able to get the home page download from 1.2MB to less than 300kB (75% reduction).</p>

<h2 id="paint---html5--css3">Paint - HTML5 &amp; CSS3</h2>

<p>The site design was implemented using SASS &amp; Compass (with HTML). This kept the CSS from growing too big and the variable names allow us to maintain things more easily going forward. The CSS3 animation support in the Compass 0.13.alpha.4 helped us to do some nice CSS animations (like the loading spinner).</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2013-10-30T00:00:00+11:00" itemprop="datePublished"><a href="http://uglow.github.io/Grunt-Server">October 30, 2013</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="http://uglow.github.io/about" title="About Brett Uglow" itemprop="url">Brett Uglow</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="http://uglow.github.io/Grunt-Server#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="http://uglow.github.io/Grunt-Server" rel="bookmark" title="Grunt live-reloading" itemprop="url">Grunt live-reloading</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <p>This post explains how I got live-reloading to work.</p>

<h1 id="idea">Idea</h1>

<p>The basic idea is you use <code>grunt-contrib-connect</code> and <code>[grunt-contrib-watch](https://github.com/gruntjs/grunt-contrib-watch)</code> together to reload your site automagically in your browser(s).
So when you change a file that’s being watched, your browser will update. Nice! </p>

<h2 id="lesson-learnt">Lesson Learnt</h2>
<ul>
  <li>Update your <code>NPM</code> packages</li>
  <li>Make sure <code>watch</code> tasks are not overriding or recursing into each other</li>
</ul>

<h2 id="problems">Problems</h2>
<p>Be careful with your watch task. If it is watching lots of files (like <code>**/*</code>) then you may run into this error:</p>

<div class="highlight"><pre><code class="console"><span class="go">2013-10-30 08:49 node[49991] (CarbonCore.framework) FSEventStreamStart: register_with_server: ERROR: f2d_register_rpc() =&gt; (null) (-21)</span>
<span class="go">2013-10-30 08:49 node[49991] (CarbonCore.framework) FSEventStreamStart: register_with_server: ERROR: f2d_register_rpc() =&gt; (null) (-21)</span>
<span class="go">2013-10-30 08:49 node[49991] (CarbonCore.framework) FSEventStreamStart: register_with_server: ERROR: f2d_register_rpc() =&gt; (null) (-21)</span>
<span class="go">...</span>
</code></pre></div>

<p>The solution I found for this was to be more specific about the kind of files to watch. In my case, I was watching <code>**/*.html</code>, which meant
I was watching source HTML files as well as generated HTML files. But also had a watch:dev task which was watching the generated files - including
the HTML files!</p>

<div class="highlight"><pre><code class="js"><span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
<span class="p">...</span>
	<span class="nx">dev</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;dev/**/*.html&#39;</span><span class="p">],</span>
		<span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&lt;%= env.environment.envName %&gt;&#39;</span><span class="p">],</span>
		<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="more-problems">More problems</h2>
<p>The next issue I found was that I needed to add the <code>livereload.js</code> file to your HTML files. That is no problem - just add it to a template or
include file before the closing <code>&lt;/body&gt;</code> tag:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//localhost:35729/livereload.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>

<p>But I noticed in Chrome that I was getting a 404 error loading <code>livereload.js</code>. So I tried using a different port - no improvment. 
After some googling, I came across <a href="http://stackoverflow.com/questions/16553549/grunt-live-reload-via-watch">this article</a> which suggested
that the version of <code>grunt-contrib-watch</code> might be out-of date.</p>

<p>So, I updated the <code>package.json</code> file to tell <code>NPM</code> to update <code>grunt-contrib-watch</code> to the latest version: </p>

<div class="highlight"><pre><code class="js"><span class="p">{</span>
  <span class="p">...</span>
  <span class="s2">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="c1">//&quot;grunt-contrib-watch&quot;: &quot;~0.3.2&quot;,</span>
    <span class="s2">&quot;grunt-contrib-watch&quot;</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>  
   <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Then run <code>npm</code>:</p>

<div class="highlight"><pre><code class="console"><span class="go">sudo npm update --save-dev</span>
</code></pre></div>

<p>This brought the package version to 0.5.3. Now, running the task again, I can see that <code>livereload.js</code> is loaded by Chrome correctly,
 and the page refreshes whenever I change a HTML or CSS page that is published into the <code>dev</code> folder - yay!</p>

<h2 id="final-gruntfilejs">Final GruntFile.js</h2>

<div class="highlight"><pre><code class="js"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>

	<span class="c1">// Load tasks</span>
	<span class="nx">require</span><span class="p">(</span><span class="s1">&#39;matchdep&#39;</span><span class="p">).</span><span class="nx">filterDev</span><span class="p">(</span><span class="s1">&#39;grunt-*&#39;</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">);</span>
	
	<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
		<span class="nx">pkg</span><span class="o">:</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">readJSON</span><span class="p">(</span><span class="s1">&#39;package.json&#39;</span><span class="p">),</span>
		<span class="nx">environments</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">dev</span><span class="o">:</span> <span class="p">{...</span>	<span class="p">},</span>
			<span class="nx">prod</span><span class="o">:</span> <span class="p">{</span>	<span class="p">...</span>	<span class="p">}</span>
		<span class="p">},</span>
		<span class="p">...</span>
		<span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
			<span class="p">...</span>
			<span class="nx">dev</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;dev/**/*.html&#39;</span><span class="p">,</span> <span class="s1">&#39;dev/**/*.css&#39;</span><span class="p">],</span>
				<span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&lt;%= env.environment.envName %&gt;&#39;</span><span class="p">],</span>
				<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
					<span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="p">...</span>
		<span class="nx">exec</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">build</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">cmd</span><span class="o">:</span> <span class="s1">&#39;jekyll build&#39;</span>
			<span class="p">}</span>
		<span class="p">},</span>
		
		<span class="nx">copy</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">files</span><span class="o">:</span> <span class="p">[{</span><span class="nx">expand</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">flatten</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">cwd</span><span class="o">:</span><span class="s1">&#39;_site&#39;</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;**/*&#39;</span><span class="p">,</span> <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;&lt;%= env.environment.outputDir %&gt;&#39;</span><span class="p">}]</span>
			<span class="p">}</span>
		<span class="p">},</span>
		
		<span class="nx">connect</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">dev</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
					<span class="nx">port</span><span class="o">:</span> <span class="mi">4000</span><span class="p">,</span>
					<span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;dev&#39;</span>
				<span class="p">}</span>
			<span class="p">},</span>
			<span class="nx">prod</span><span class="o">:</span> <span class="p">{</span>
				<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
					<span class="nx">port</span><span class="o">:</span> <span class="mi">4000</span><span class="p">,</span>
					<span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;dist&#39;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">});</span>
	
	
	<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;env&#39;</span><span class="p">,</span> <span class="s1">&#39;Set environment variables for use by other tasks.&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">environment</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">environment</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">environment</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">grunt</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;You must specify the environment as either DEV or PROD.&#39;</span><span class="p">);</span>
			<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="c1">// Store the environment definition in &#39;env.environment&#39;</span>
		<span class="kd">var</span> <span class="nx">envName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">environment</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
		<span class="kd">var</span> <span class="nx">envDefinition</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;environments.&#39;</span> <span class="o">+</span> <span class="nx">envName</span><span class="p">);</span>
		
		<span class="nx">grunt</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;env.environment&#39;</span><span class="p">,</span> <span class="nx">envDefinition</span><span class="p">);</span>
		
		<span class="kd">var</span> <span class="nx">envName</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;env.environment.name&#39;</span><span class="p">);</span>
		
		<span class="nx">grunt</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="nx">envName</span> <span class="o">+</span> <span class="s1">&#39; environment &lt;&lt;&lt;--------------------------------------&#39;</span><span class="p">);</span>
	<span class="p">});</span>
	
	<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;env:dev&#39;</span><span class="p">,</span> <span class="s1">&#39;clean:env&#39;</span><span class="p">,</span> <span class="s1">&#39;exec:build&#39;</span><span class="p">,</span> <span class="s1">&#39;compass:build&#39;</span><span class="p">,</span> <span class="s1">&#39;copy:env&#39;</span><span class="p">,</span> <span class="s1">&#39;connect:dev&#39;</span><span class="p">,</span> <span class="s1">&#39;watch&#39;</span><span class="p">]);</span>
<span class="p">};</span>
</code></pre></div>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2013-10-30T00:00:00+11:00" itemprop="datePublished"><a href="http://uglow.github.io/Front-End-Automation-Presentation-Greatness">October 30, 2013</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="http://uglow.github.io/about" title="About Brett Uglow" itemprop="url">Brett Uglow</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="http://uglow.github.io/Front-End-Automation-Presentation-Greatness" rel="bookmark" itemprop="url" title="Front-end Automation presentation greatness"><i class="icon-double-angle-right"></i></a> <a href="https://speakerdeck.com/addyosmani/automating-front-end-workflow">Front-end Automation presentation greatness</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <p>Addy Osmani is leading speaker in the front-end world. Great presentation</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    Previous
  
  <ul class="inline-list">
    <li>
      
        <span class="current-page">1</span>
      
    </li>
    
      <li>
        
          <a href="http://uglow.github.io/page2">2</a>
        
      </li>
    
  </ul>
  
    <a href="http://uglow.github.io/page2" class="btn">Next</a>
  

</div>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Brett Uglow. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://uglow.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://uglow.github.io/assets/js/scripts.min.js"></script>

          

</body>
</html>